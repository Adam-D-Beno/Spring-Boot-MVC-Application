# Spring Boot MVC Application
Swagger: http://localhost:8080/swagger-ui/index.html#/
## Цель задания

В этом задании вам предстоит реализовать HTTP-эндпоинты для обработки входящих запросов. Создать приложение, которое обрабатывает пользователей и их питомцев.

1. Научиться разрабатывать слой HTTP взаимодействия в Java программах с использованием Spring Boot MVC.
2. Обрабатывать выбрасываемые ошибки приложением и возвращать понятный ответ.
3. Валидировать входные параметры запросов REST.

## Задание на разработку

### Шаг 1: Создание проекта

- **Инициализация проекта**: Используйте Spring Initializr для создания нового проекта Spring Boot. Выберите необходимые зависимости: Spring Web, Spring Boot DevTools, Validation.

### Шаг 2: Создание моделей

- **Создание сущностей**: Создайте классы `UserDto` и `PetDto` в пакете `model`.

```java
public class UserDto {
    private Long id;
    private String name;
    private String email;
    private Integer age;
    private List<PetDto> pets;
    // Getters and Setters
}

public class PetDto {
    private Long id;
    private String name;
    private Long userId;
    // Getters and Setters
}
Шаг 3: Создание контроллеров
Контроллер пользователей: Создайте UserController с методами:

POST: Создание пользователя.
PUT: Обновление пользователя.
DELETE: Удаление пользователя.
GET: Получение пользователя по id.
Контроллер питомцев: Создайте PetController с методами для создания и удаления питомцев. Каждый питомец относится к какому-то пользователю. Методы должны быть такие же как у UserController.

Шаг 4: Валидация и обработка исключений
Валидация: Используйте аннотации из javax.validation для валидации полей в классах User и Pet. Например, @NotNull, @Email для поля email в классе User.
Обработка исключений: Создайте класс GlobalExceptionHandler с аннотацией @ControllerAdvice для обработки исключений, включая ошибки валидации. Обрабатывайте различные ошибки с разной логикой. Ошибки валидации — один обработчик, ошибка поиска сущности — другой обработчик.
Единый ответ на ошибки: Возвращайте единый ErrorMessageResponse из всех обработчиков ошибок.
Шаг 5: Сервисный слой и хранение данных
Сервисный слой: Создайте сервисные классы UserService и PetService для обработки бизнес-логики. Используйте коллекции (например, HashMap) для хранения данных о пользователях и питомцах.
Реализация методов: Реализуйте методы в сервисных классах для создания, получения и удаления пользователей и питомцев. Убедитесь, что при добавлении и удалении питомца он добавляется и удаляется из списка питомцев пользователя. Также проверьте валидацию полей пользователей и питомцев.
Шаг 6: Написание тестов
Тестирование UserController:

Напишите тесты для проверки создания пользователя и получения пользователя по ID. Используйте @WebMvcTest для тестирования слоя MVC и MockMvc для отправки запросов к контроллеру.
Проверьте статус ответа и содержание ответа, чтобы убедиться, что данные пользователя возвращаются корректно.
Тестирование PetController:

Аналогично пользовательскому контроллеру, напишите тесты для создания и удаления питомцев.
Убедитесь, что при создании питомца валидируется наличие владельца.
Проверьте корректность обработки запросов и удаление питомца из коллекции.
